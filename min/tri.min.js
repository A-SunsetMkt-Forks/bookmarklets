javascript:krazete:(function(){var a=Math.PI,b={menu:document.createElement("div"),limit:document.createElement("input"),gap:document.createElement("input"),sag:document.createElement("input"),fov:document.createElement("input"),flo:document.createElement("input"),off:document.createElement("input"),non:document.createElement("input"),end:document.createElement("input"),tgl:document.createElement("input"),cssStatic:document.createElement("style"),cssDynamic:document.createElement("style"),orientation:{yaw:0,pitch:0,roll:0},mouseMove:function(c){var d=Math.cos;b.orientation.yaw=180*-d(a*c.clientX/innerWidth)*b.limit.value,b.orientation.pitch=180*d(a*c.clientY/innerHeight)*b.limit.value,b.updateBody()},gyroMove:function(a){var c=innerWidth>innerHeight;c?(b.orientation.yaw=-(a.alpha+a.beta),b.orientation.pitch=a.gamma-90*Math.sign(90-Math.abs(a.beta))):(b.orientation.yaw=-(a.alpha+a.gamma),b.orientation.pitch=a.beta-90),b.updateBody()},updateOrigin:function(){document.body.style.transformOrigin=innerWidth/2+pageXOffset+"px "+(innerHeight/2+pageYOffset)+"px"},updateBody:function(){document.body.style.transform="perspective("+Math.pow(2,b.fov.value)+"px) translateZ(-"+b.gap.value+"px) rotateX("+b.orientation.pitch+"deg) rotateY("+b.orientation.yaw+"deg)"},updateCSS:function(){if(b.non.checked)b.cssDynamic.innerHTML="";else if(b.off.checked)b.cssDynamic.innerHTML="* { transform-style: preserve-3d; }";else{for(var c=0;document.querySelector("body"+" > *".repeat(c));c++);var d=b.gap.value/c,e=-a*b.sag.value/c;b.cssDynamic.innerHTML=` * { transform: translateZ(${d}px) rotateX(${e}rad); transform-style: preserve-3d; transition: transform 1s; outline: 1px solid rgba(0, 0, 0, 0.0625); ${b.flo.checked?"overflow: visible !important;":""} } *:hover { transform: translateZ(${2*d}px) rotateX(${2*e}rad); ${b.flo.checked?"":"overflow: visible;"} } `}},toggle:function(){"active"==b.menu.className?b.menu.removeAttribute("class"):b.menu.className="active"},quit:function(){window.removeEventListener("deviceorientation",b.gyroMove),window.removeEventListener("mousemove",b.mouseMove),window.removeEventListener("scroll",b.updateOrigin),window.addEventListener("resize",b.updateOrigin),b.menu.remove(),b.cssStatic.remove(),b.cssDynamic.remove(),document.body.removeAttribute("style")},newRange:function(a,c,d,e,g,h,i){b.menu.appendChild(a),a.type="range",a.min=d,a.max=g,a.step=e,a.value=h,a.addEventListener("input",i),b.menu.appendChild(document.createElement("span")).innerHTML=c,b.menu.appendChild(document.createElement("br"))},newCheckbox:function(a,c,d){b.menu.appendChild(a),a.type="checkbox",a.addEventListener("click",d),b.menu.appendChild(document.createElement("span")).innerHTML=c,b.menu.appendChild(document.createElement("br"))},newButton:function(a,c,d){b.menu.appendChild(a),a.type="button",a.value=c,a.addEventListener("click",d)},init:function(){document.body.parentNode.appendChild(b.menu).id="tri-menu",b.newRange(b.limit,"limit",0,.03125,1,.125,b.updateBody),b.newRange(b.gap,"gap / distance",0,32,512,128,function(){b.updateCSS(),b.updateBody()}),b.newRange(b.sag,"sag",-.25,.03125,.25,0,b.updateCSS),b.newRange(b.fov,"field of view",7,1,13,10,b.updateBody),b.newCheckbox(b.flo,"force overflow",b.updateCSS),b.flo.setAttribute("checked",""),b.newCheckbox(b.off,"flatten layers",b.updateCSS),b.newCheckbox(b.non,"flatten everything",b.updateCSS),b.newButton(b.end,"Quit",b.quit),b.newButton(b.tgl,"\u2261",b.toggle),b.tgl.id="tri-toggle",b.menu.appendChild(b.cssStatic).innerHTML=` html, body { transition-property: none; height: 100%25; width: 100%25; } html, html:hover, #tri-menu, #tri-menu > *, #tri-menu > *:hover { transform: none; outline: none; overflow: auto !important; float: none; } #tri-menu { position: fixed; top: 0; left: 0; background: rgba(0, 0, 0, 0.5); color: white; border: 1px solid rgba(255, 255, 255, 0.5);; border-radius: 0 0 16px 0; padding: 8px; transform: translate(-100%25, -100%25) translate(32px, 32px); } #tri-menu.active { transform: none; } #tri-toggle { position: absolute; bottom: 0; right: 0; height: 32px; width: 32px; background: transparent; color: white; border: none; cursor: pointer; } #tri-menu.active > #tri-toggle { background: white; color: black; border-radius: 8px 0 0 0; } `,b.menu.appendChild(b.cssDynamic),b.updateCSS(),window.addEventListener("deviceorientation",b.gyroMove),window.addEventListener("mousemove",b.mouseMove),window.addEventListener("scroll",b.updateOrigin),window.addEventListener("resize",b.updateOrigin),window.scrollBy(0,1)}};b.init()})();